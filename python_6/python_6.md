## 6.1 一般的な文字列操作を行う

### 文字列リテラルの書き方

- 文字列リテラルは3つの書き方がある

**例：**
```python
# シングルクォート
'hoge'
# ダブルクォート
"piyo"
# 三重引用符
'''huga'''
"""hugahuga"""
```

- 文字列リテラルには**エスケープシーケンス**という特殊な文字を含めることができる

> ### エスケープシーケンスとは
> - エスケープシーケンスは、プログラミング言語やマークアップ言語において、**特殊な意味を持つ文字の組み合わせ**。
> - 通常、**バックスラッシュ（`\`）とそれに続く1つまたは複数の文字で構成** され、**そのままでは入力できない制御文字や特殊文字**を表現するために使用される
> #### **主な用途**
> - **制御文字の表現：** 改行（`\n`）、タブ（`\t`）など、**キーボードから直接入力できない文字** をコード内に記述する。
>   - これにより、出力のレイアウトを調整でる。
> - **特殊文字の表現**：二重引用符（**`"`**）や単一引用符（**`'`**）など、言語の文法上特別な意味を持つ文字を、**その文字通りに扱いたい**場合に用いる。
>   - たとえば、文字列リテラルの中に`"`を含めたい場合、**`\"`** とエスケープする。
> - **文字コードの指定**： **Unicode文字**（`\uXXXX`）など**特定の文字コードを直接指定して文字を表現**する場合に利用される

**例：literal.py**

- 先頭に「**`r`**」をつけたraw文字列にすることで、エスケープシーケンスを無効にできる。
- 複数の文字列リテラルを「**スペース**」で挟むと**1つの文字列リテラル**として扱うことができる
    - 改行を入れて複数行に分けることもできる。
    - **`()`** で囲んで複数行に分けて書くと、コードが読みやすくなる。
**例：literl.py**

#### 文字列以外のオブジェクトを文字列に変換

- **`str()`** 関数に対象のオブジェクトを渡す
  - 自分で作ったクラスのオブジェクトを文字列に変換したい場合は、**`__str__()`** メソッドを実装する。

**例： change_str.py**

#### 文字列のチェックメソッド
**例： check_str.py**

#### 文字列の返還を行う
**例： exchange_str.py**

#### そのほかの文字列メソッド
**例： other_str_method.py**

#### 文字列定数を利用する
**例：str_const.py**

## 6-2.  フォーマットと文字列リテラル ー f-string
### `f-string` の書き方

- `f-string`は文字列の先頭に **`f`** または **`F`** を付けて、文字列中に **`{expression}`** と書くことでPythonの式に埋め込める。
    - **`{expression}`** には変数だけでなく、計算式もかける

#### `＝`を付けた出力
- 「**`{変数名}`**」のように変数名の右に「**`=`**」を付けることで「**`変数名 = 値`**」の形式で出力できる

例：f_string.py

### フォーマットの指定方法

- 「**`:`**」のうしろに**文字列変換のためのフォーマット**を指定できる

**例：format.py**

#### `f-string`導入前の文字列フォーマット方法

**`str.format()` メソッド**

```python
str.format(*args, **kwargs)
```
- **引数：**
    - **`args`**：書式化する値を位置引数で指定
    - **`kwargs`**：書式化する値をキーワード引数で指定
**例：str_format.py**

#### `%`**演算子**

- **`%`** 演算子は「**`文字列 % 値`**」のように書く。
    - 文字列リテラル中の値を埋め込む場所には **`%`** で始まる変換指定子を書く。
**例：per_operator.py**

## 正規表現を扱う ー re

### 基本的な関数 ー `search`、`match`

- **`search(pattern, string, flags=0)`**
    - 指定された文字列が**正規表現にマッチ**するか調べる
        - **`pattern`：** 正規表現の文字列を指定
        - **`string`：** 正規表現にマッチするか確認する文字列を指定
        - **`flags`：** 正規表現コンパイル時のふるまいを変更するフラグを指定
- **`match(pattern, string, flags=0)`**
    - 指定された文字列が正規表現にマッチするか調べる
        - **`search`** とは異なり、**文字列の先頭にのみ**マッチする
**例：re_module.py**

### reモジュールの定数（フラグ）

- reモジュールには、正規表現をコンパイルするときに指定するフラグが定数として用意されている。
    - フラグの定数は１文字だけのもの（Aなど）と、フラグの意味をあらわす単語のもの（ASCⅡなど）の２種類がある。
**例：re_module_const.py**

### 正規表現オブジェクト

- 正規表現オブジェクトは　**`compile()`**　関数に正規表現のパターンを指定して作成する。

```python
compile(pattern, flags=0)
```

- 指定された正規表現パターンをコンパイルして、正規表現オブジェクトを返す
- 引数：
    - **`pattern`**：正規表現の文字列を指定
    - **`flags`**：正規表現コンパイル時のふるまいを変更するフラグを指定
- 戻り値：正規表現オブジェクト
**例：regex_obj.py**

#### 正規表現オブジェクトで使用できる主なメソッド
1. **`match()`**
- 指定した文字列が正規表現にマッチするかを返す
  - **先頭からマッチするか**を確認

2. **`search()`**
- 指定した文字列が正規表現にマッチするかを返す

3. **`findall()`**
- 指定した文字列の正規表現にマッチした文字列**すべてをリストで返す**

4. **`finditer()`**
- 指定した文字列の正規表現にマッチしたマッチオブジェクトを**イテレーターで返す**

5. **`sub()`**
- 指定した文字列の中で正規表現にマッチした文字列を**第一引数（例では`###`）に置き換える**
6. **`fullmatch()`**
- 指定した**文字列全体**が正規表現にマッチするかを返す
**例：regex_obj_method.py**

### マッチオブジェクト
- マッチオブジェクトは**正規表現にマッチした文字列に関する情報を保持**するオブジェクト
- 正規表現の中で **`（）`** で囲んだ範囲はサブグループとなり、**カッコの中にあるパターンにマッチした文字列のみ**を取り出すことができる。
- マッチオブジェクトに対して **`group()`** メソッドまたは **`[]`** でインデックスを指定すると、サブグループを取得できる。
**`group()` のバリエーション**
- **`group()`**：マッチ全体を返す（**`group(0)`** と同じ）
- **`group(1)`** / **`group(2)`**：カッコで囲った部分（グループ）を取得

- 名前付きグループを指定する場合は、正規表現の中で次のように書く
```python
(?P<グループ名>パターン)
```
​
- **`?P<name>`** は「`name` という名前のグループ」という意味
  - `P`は "**Python-style named group**" の略
  **例：match_obj.py**

#### マッチオブジェクトの主なメソッド
**`groups()`**
- グループ（括弧 () で囲った部分）にマッチした値を**タプルで返す**
  - **番号付きグループ（通常の括弧）だけ対象**
  - 名前付きグループは**名前を無視して、順番で返す**

**`groupdict()`**
- パターンにマッチした値を**辞書で返す**

**`expand(template)`**
- テンプレート文字列で**再構成した文字列**を返す
- グループ番号や名前を **`${name}`** や **`\1`** 形式で埋め込める
- 置換処理のカスタマイズに便利（**`re.sub()`** の置換関数内など）

**例：match_obj_method.py**

### Unicodeデータベースへアクセスする- `unicodedata`

#### Unicode文字と文字の名前を変換する
- **`unicodedata`** モジュールは各種Unicodeの文字とその文字を表す名前を相互に変換する関数を提供する
**`unicodedata.name()`**
- 文字の「正式な名前」を返す
  - 名前が定義されていない場合は`Value Error`

**`unicodedata.lookup()`**
- **名前から文字を取得**する（逆引き）。
    - 存在しない場合は`key Error`
**例：unicodedata_method.py**

#### Unicode文字列の正規化
- `unicodedata`モジュールの **`normalize`** 関数を使うと、正規化した文字列を取得できる
    - 文字列の正規化は、半角カタカナと全角カタカナの混在した文字列を**全角カタカナに統一する**などで使用できる
    - 複数の表現がある文字（たとえば `é` = `e` + `´`）を**一貫性のある形式に揃える**ために使用される。

**`unicodedata.normalize(form, unistr)`**
- 引数:
    - **`form`**：正規化の形式を指定する文字列（下記の 4 種類）
        | **形式** | **名前** | **特徴** |
        | --- | --- | --- |
        | **`'NFC'`** | Normalization Form C | 合成：可能な限り文字をまとめる（例: `e` + `´` → `é`） |
        | **`'NFD'`** | Normalization Form D | 分解：可能な限り文字を分ける（例: `é` → `e` + `´`） |
        | **`'NFKC'`** | Compatibility Composition | 合成 + 互換文字の変換（例: 全角 → 半角、上付き文字も）日本語は全角、英数字は半角に変換される |
        | **`'NFKD'`** | Compatibility Decomposition | 分解 + 互換文字の変換（例: `①` → `1` + `〇`） |
        - **`unistr`**： 正規化したい文字
**列 normalization.py**