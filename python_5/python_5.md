## 5.1 型ヒント

### 型ヒントとは

- Pythonは動的型付け言語のため、型を指定せずに利用できるが、型ヒントはPythonの言語仕様にそって、変数や関数の引数、戻り値に対して型を付けることができる
- **例：型ヒントの書き方**

```python
message: str ='hi, there'
```

- 型ヒントは**アノテーション**であるため、プログラムの実行時に**型チェックはされない。**
    - 指定した型に従わないデータを代入しても問題なく動く。

### 基本的な型ヒントの一覧と書き方

- 基本的な型はPythonに組み込まれている
    - **`int`** ・**`float`**・**`bool`**・**`str`**・**`bytes`** が利用できる

**関数の引数、戻り値の片付け**

**例：**

```python
def five_yeras_later(age: int) -> int:
	return age + 5
```

- 戻り値がない場合は **`-> None`** を指定する

**リストや辞書の型付け**

- リストや辞書などのコンテナーの型を付けることができる
    - **`list`**・**`dict`**・**`set`**・**`tuple`** などが使える。

**例：**
```python
hobby: list = ["game", "manga"]

# リストのキーや値に型を付けることもできる
favorite[str, str] = {"study": "math", "movue", "saw"}
```

- タプルの要素に型付けする場合は、**タプルを構成するすべての要素に対して、型を指定する必要**がある。
    - 同じ型の場合は「`…`」で繰り返しを省略できる。


**ユーザー定義クラスを型として利用する**

- 自分で定義したクラスを型としても利用できる。
**例：**　type_checking.py

### typingモジュールを利用した型ヒント

- 型ヒントをサポートする標準ライブラリである**typing**モジュールを利用すると、様々な型を付けることができる

**複数の型を許可する型**

- 複数の異なる方で利用する場合に役立つのが **`Union`** と **`Optional`**

- **`Union`**はユニオン型で**複数の型を指定**できる
  - **Python3.10**からは複数の型を許可するための新しい記法が追加された。
    - **「`型名 | 型名`」** とより簡単に記述でき、**`import` も不要**
- **`Optional`** は指定した型と **`None`** の値を許可する
- **`Literal`** は特定の値のみを許可する定義ができる型
- **`Any`** 型で定義しておくことであらゆる型を受け付けることが可能
**例：**　type_module.py

**型変数を定義する**

- **`TypeVar`** は **型変数**と呼ばれる型を定義できる
    - 型変数で型を付けた場合、**同じ型**であるという意味になる（デフォルトで不変の性質を持つ）
    - 具体的な型は利用するときに指定
    - 型変数は関数の引数や戻り値、**`typing`** モジュールの **`Generic`** などと併せて定義したクラスで利用し、主に汎用的な機能やライブラリを作る場合に効果を発揮
    - 関数やクラスが **“どんな型でも受け取れるが、型の一貫性は保ちたい”** 場面で使う
**例：**　typevar.py

**辞書のキーと値の型を指定**

- **`TypedDict`** を利用すると、**キーと値の型を指定した辞書**を作成できる。
    - **`dict`** で型付けするよりも、より厳密に型付けできる。

- **dictとの違い**

| ポイント |`dict[int, int]` |`User(TypedDict)` |
| --- | --- | --- |
| キーの型 | `int`のみ | 固定の文字列キー (`name`, `age`) |
| 値の型 | `int`のみ | キーごとに異なる型 (`str`, `int`) |
| キーの数 | 任意の数のキー | 予め決まったキーのみ |
| 用途 | 汎用的な整数キー辞書 | 構造化された固定フォーマットの辞書 |

**例：**　typevar.py
